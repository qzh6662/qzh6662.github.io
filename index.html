<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="sp0cket" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="sp0cket的博客">
<meta property="og:url" content="http://coding.sp0cket.top/index.html">
<meta property="og:site_name" content="sp0cket的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sp0cket的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"搜索文章内容","hits_empty":"没有找到任何与这条关键字有关的内容: ${query}","hits_stats":"${hits} 条结果，搜索用时 ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://coding.sp0cket.top/"/>





  <title>sp0cket的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">sp0cket的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/8fdc.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/8fdc.html" itemprop="url">ubuntu安装mysql 8.0</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-21T01:14:37+08:00">
                2018-04-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>首先从官网下载描述文件<code>wget https://dev.mysql.com/get/mysql-apt-config_0.8.10-1_all.deb</code></li>
<li>sudo dpkg -i mysql-apt-config_0.8.10-1_all.deb</li>
<li>在配置页面依次选择<code>mysql-8.0</code>,<code>Enabled</code>,<code>Disabled</code>，此处也可按需自己选择。完成后选择<code>OK</code>回车</li>
<li>执行<code>sudo apt-get update</code>更新一下apt源</li>
<li>执行<code>sudo apt-get install mysql-server</code>开始安装</li>
<li>安装时会提示输入root密码，并选择是否使用更安全的密码加密方式，之后会自动完成安装</li>
<li>安装完成后可以使用<code>sudo service mysql status</code>检查MySQL服务是否已启动</li>
<li>使用<code>mysql -u root -p</code>然后输入安装时设置的密码测试是否ok</li>
<li>完</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/1cf0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/1cf0.html" itemprop="url">Xcode 8以上自动设置Automaticall manage signing后添加udid</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-25T16:21:24+08:00">
                2017-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>首先在<a href="https://developer.apple.com/account/ios/device/" target="_blank" rel="noopener">开发者网站</a>上添加设备udid号</li>
<li>打开<code>~/Library/MobileDevice/Provisioning Profiles</code>目录</li>
<li>移除所有项目</li>
<li>打包</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/37ce.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/37ce.html" itemprop="url">项目升级Xcode 9和Swift 4</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-14T14:19:59+08:00">
                2017-09-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从今年WWDC上已经能看到很多关于Swift 4的新特性，包括JSON解析和新的KVO写法等。如果没有特殊需求的话，完全可以使用Codeable来代替各类三方的JSON解析库。</p>
<p>开发环境：</p>
<ul>
<li>Xcode 9.0 GM (9A235)</li>
<li>iOS 11.0 GM</li>
<li>macOS Sierra</li>
<li>carthage 0.25.0</li>
<li>pod 1.3.1</li>
</ul>
<h2 id="Xcode-9-GM"><a href="#Xcode-9-GM" class="headerlink" title="Xcode 9(GM)"></a>Xcode 9(GM)</h2><p>首先，Xcode 9中支持Swift 3.2，把之前的项目代码修改为在Xcode 9环境中能够编译运行再进行其他操作。我目前项目中大量使用Carthage去管理三方库，少部分使用Pod。首次尝试在Xcode 9中编译运行时会出现<code>Module compiled with Swift 3.1 cannot be imported in Swift 3.2</code>,解决方案：</p>
<ol>
<li>首先执行<code>rm -rf ~/Library/Caches/org.carthage.CarthageKit/DerivedData</code></li>
<li>然后移除项目根目录下的<code>Carthage</code>文件夹</li>
<li>执行<code>sudo xcode-select --switch /Applications/Xcode-GM.app/Contents/Developer</code>用来切换到Xcode 9的Commmand Line Tools。注意此处路径改完当前GM版Xcode路径，如Xcode 9正式版发布通过App Store更新可跳过此步骤</li>
<li>执行<code>carthage update --platform iOS</code>可在<code>update</code>后面单独指定几个出问题的库来重新build用空格隔开。如在执行这一步的时候报错可在github上查看作者是否更新了swift 4支持的分支，如果有的话可以通过在<code>cartfile</code>里面指定该分支来update。例如：<code>github &quot;xmartlabs/Eureka&quot; &quot;feature/Xcode9-Swift4&quot;</code></li>
</ol>
<p>此时在Xcode 9中已经能够正常Build项目了。可以检查一下自己的项目在iOS 11中是否存在兼容性问题。我手里的项目在11系统下发现2个bug，都是UI相关的。顺带一提，如果应用要支持iPhone X的话不能把状态栏再把系统状态栏高度默认为20了，iPhone X的状态栏高度是44，应该通过<code>UIApplication.shared.statusBarFrame.height</code>去取当前状态栏高度。</p>
<h2 id="Swift-4-0"><a href="#Swift-4-0" class="headerlink" title="Swift 4.0"></a>Swift 4.0</h2><p>将当前项目Targets的<code>Build Settings</code>&gt;<code>Swift Compiler - Language</code>&gt;<code>Swift Language Version</code>中修改为<code>Swift 4.0</code>然后手动修改项目。或者从警告列表中点击<code>Conversion to Swift 4 is available</code>会弹出一个升级引导。</p>
<p>同时需要把<code>Build Settings</code>中<code>Swift 3 @objc Inference</code>设置为<code>Off</code>否则会有一个警告</p>
<p>修改工作量最大的应该是<code>@objc</code>在Swift 4中需要显式指定。所有需要开放给OC调用的事件都需要加<code>@objc</code>修饰。</p>
<p>其次就是修改KVO的写法，在Swift 3时代KVO的写法还与OC类似，且需要在<code>deinit</code>时释放观察者。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/5e03.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/5e03.html" itemprop="url">记录一下Vapor中遇到的一些问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-15T22:48:11+08:00">
                2017-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>首先，我一开始使用的服务端Swift框架并不是Vapor，在转战Vapor之前使用过一段时间的Perfect，至于转战原因，就先从Perfect框架开始说说吧。</p>
<p>Perfect框架的优点是中文文档挺多，而且善于推广，我在去年就收到过来自Perfect团队的推广邮件（那时候第一次发现已经有大触开始做Server Side Swift框架了），这个项目在Github上面的Star数一直压Vapor一头。我也是对比了一下Star数选择先试着用Perfect，粗略的看了一下他们的文档，提供的支持库还是挺全的，一上手就能开始写。刚开始用的时候感觉比起Java开发的后台来说确实方便了很多，不用去配置各种复杂的配置文件（ssh框架中配置的命名空间就够烦的）。Perfect的服务器配置很简单，几行代码就能配置完启动服务器。但是在使用过程中感觉这个库更像是在模仿Java服务端的模式，Swift的优势在这个库里面很少体现出来。</p>
<p>特别是当我写到数据库部分的时候出了点问题，Perfect的mysql数据库驱动返回的结果集太蠢了，居然是[[String]]类型，在后端开发中查询的结果中数据类型还是挺重要的，返回的每个字段都是String怎么玩。再者，该结果集还是个数组，也就是说想要取其中一个字段得用下标去找？一点都不优雅好么？果断转战Vapor。</p>
<p>相对于Perfect的大部分中文文档来说，Vapor的文档就几乎没有中文的了，不过这点影响不大，直接上手。同样也是简洁的配置就能创建服务器，这个框架给我的感觉就是简洁而且优雅，不仅仅是接口，前端的表现也是相当美丽。支持h5的同时还支持用leaf去创建View来做前端页面，虽然我从来没接触过leaf，但是看了下官方文档里面的使用方式并不麻烦，基本一个html5页面稍加修改就能成为一个leaf页面。</p>
<p>在数据库方面Vapor的表现更为出彩，不仅能够以直接连接数据库进行sql查询，而且还可以使用框架模型来对数据进行管理，有些类似Java中的Hibernate框架。即使直接执行sql查询，它返回的结果集也是一个[[String: Node]]，得益于框架中Node类型（不是Node js）广泛使用，在转换各种数据类型的时候也是很方便的，所以也就解决了我的一大痛点。</p>
<p>不过一些小问题还是有的，比如在新增swift文件的时候这个文件并不会被加到编译文件列表中，需要重新使用<code>vapor xcode</code>命令来重新生成一下xproj文件，当然手动添加也没问题。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/980b.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/980b.html" itemprop="url">react-native开坑第二篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-03T11:22:19+08:00">
                2017-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>用react-native写了个小demo，看了一些基本控件的api，也用了一些三方控件。也入了个误区：一直想用rn写一套代码双平台都能使用（可能功力不够），然而有许多控件在iOS平台和Android平台上的展现方式都不一样，例如：Navigator的Title在iOS上显示为居中，而Android平台上则靠左显示（安卓平台基础控件就是这样的）。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/871.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/871.html" itemprop="url">react-native开坑第一篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-20T21:42:05+08:00">
                2016-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>写这篇博客主要是记录一下react native学习过程中遇到的一些问题，方便和我一样遇到这些问题的大兄弟不用满世界搜解决方案了。</p>
<p>开发环境及设备信息：</p>
<ul>
<li>Xcode 8.2.1</li>
<li>macOS Sierra 10.12.2</li>
<li>Android Studio 2.2</li>
<li>Node 6.4.0</li>
<li>react-native-cli 2.0.1</li>
<li>react-native 0.39.2</li>
<li>小米5 MIUI8 开发版 Android 7.0</li>
<li>iPhone6 iOS 10.2</li>
</ul>
<p>以上为目前使用的开发环境，以后肯定会升级，没有特殊情况的话我都会尽量升级到最新版本的，然后继续踩坑填坑。</p>
<p>关于react native的安装和配置网上一搜一大把，就不再赘述，在<a href="http://reactnative.cn/" target="_blank" rel="noopener">react native中文网</a>上也能找到好多资料，包括视频教程。</p>
<p>按照教程配置完成后跑了一下第一个项目，在iOS端没有遇到任何问题，直接打开工程就能直接跑程序。当然要在真机上跑的话要配置一下证书签名。Xcode 8有自动配置，只需要选择好Team，在Bundle ID里面自己起一个标识符名称就会自动生成签名证书，简直不要太方便。</p>
<p>但是在跑安卓项目的时候遇到了些问题，我用的是小米手机，情况有些特殊，打开了USB调试之后还是不能正常安装RN应用（原生应用能通过ADB正常安装）出现以下报错信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Installing APK &apos;app-debug.apk&apos; on &apos;MI 5 - 7.0&apos;</span><br><span class="line">Unable to install ..../react-native/AwesomeProject/android/app/build/outputs/apk/app-debug.apk</span><br><span class="line">com.android.ddmlib.InstallException: Failed to establish session</span><br></pre></td></tr></table></figure>
<p>该问题在<a href="http://stackoverflow.com/questions/32577761/com-android-ddmlib-installexception-failed-to-establish-session-react-native" target="_blank" rel="noopener">stack overflow</a>上有详细解答。对于小米手机来说，除了要打开开发者模式中的USB调试之外，还需要在开发者模式中关闭<code>启用MIUI优化</code>并重启手机，之后就能正常安装RN应用了。</p>
<p>但是光安装完了又出问题了，程序一打开就出现<code>XXXX已停止运行</code>，并且自动跳到一个页面<code>可出现在其他应用上的应用</code>，点击<code>查看日志摘要</code>（MIUI开发版应用Crash时自带功能，不清楚稳定版有没有该功能），主要包括以下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.RuntimeException: com.facebook.react.devsupport.JSException: Could not get BatchedBridge, make sure your bundle is packaged correctly</span><br><span class="line">	at com.facebook.react.bridge.DefaultNativeModuleCallExceptionHandler.handleException(DefaultNativeModuleCallExceptionHandler.java:24)</span><br></pre></td></tr></table></figure>
<p>这个问题的话主要分两步解决：</p>
<ol>
<li>首先到安全中心-&gt;授权管理-&gt;应用权限管理-&gt;找到自己安装的app-&gt;将显示悬浮窗权限改为允许</li>
<li>做完以上那一步再点击应用打开就不会出现Crash了，能看到一个红屏，上面显示的信息还是之前报的那个错误，现在在终端输入<code>adb reverse tcp:8081 tcp:8081</code>,然后点击菜单键<code>Reload</code>一下就能正常显示APP内容啦。</li>
</ol>
<p>PS:如果使用的是Android 5.0以下的手机则需要点击菜单键-&gt;点击<code>Dev Settings</code>-&gt;<code>Debug server host &amp; port for device</code>-&gt;输入自己电脑的IP:端口号-&gt;回到应用点击菜单键-&gt;<code>Reload</code>一下即可</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/a1c0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/a1c0.html" itemprop="url">Git push 502错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-08T10:05:07+08:00">
                2016-12-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>出现该错误的原因是git上传单文件大小不能超过10M，导致服务器拒绝。解决方式是通过修改git中设置,http post最大值为150MB，命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --local http.postBuffer 157286400</span><br></pre></td></tr></table></figure>
<p>但是不建议更改该设置，过大的文件不建议添加到git跟踪库中</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/cc43.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/cc43.html" itemprop="url">手动创建swift 3中的自动释放池，并且防止应用被调试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-01T21:36:38+08:00">
                2016-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>众所周知main函数是大多数程序的入口点，然而在swift项目中并不能找到<code>main</code>函数或者<code>main.swift</code>文件。主要原因是在iOS开发中我们很少需要改变这个函数中的内容，默认都是构造一个自动释放池来管理对象和使用<code>UIApplicationMain</code>函数初始化应用程序。所以Xcode在<code>AppDelegate.swift</code>中提供了一个<code>@UIApplicationMain</code>来自动生成这部分代码，我们可以自己重新创建一个<code>main.swift</code>文件，由于该文件的特殊性使得在该文件中我们可以直接开始写代码而不用再创建类</p>
<p>修改方法：</p>
<ol>
<li>删除<code>AppDelegate.swift</code>中的<code>@UIApplicationMain</code></li>
<li>新建<code>main.swift</code>文件</li>
<li>手动创建自动释放池</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">autoreleasepool(invoking: &#123; () -&gt; () <span class="keyword">in</span></span><br><span class="line">    <span class="type">UIApplicationMain</span>(</span><br><span class="line">        <span class="type">CommandLine</span>.argc,</span><br><span class="line">        <span class="type">UnsafeMutableRawPointer</span>(<span class="type">CommandLine</span>.unsafeArgv)</span><br><span class="line">            .bindMemory(</span><br><span class="line">                to: <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">Int8</span>&gt;.<span class="keyword">self</span>,</span><br><span class="line">                capacity: <span class="type">Int</span>(<span class="type">CommandLine</span>.argc)),</span><br><span class="line">        <span class="literal">nil</span>,</span><br><span class="line">        <span class="type">NSStringFromClass</span>(<span class="type">AppDelegate</span>.<span class="keyword">self</span>)</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>现在已经完成自动释放池的编写，为了防止别人对我们的app进行调试,可以在此处进行处理，用来防止gdb依附。此处参考了<a href="http://www.jianshu.com/p/8e6ae6a4f457" target="_blank" rel="noopener">一个大番茄的简书</a></p>
<p>具体操作流程：</p>
<ul>
<li>新建一个.c文件并命名为DenyPtrace.c</li>
<li>将以下代码拷贝到新建的c文件中</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;dlfcn.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*<span class="keyword">ptrace_ptr_t</span>)</span><span class="params">(<span class="keyword">int</span> _request, <span class="keyword">pid_t</span> _pid, <span class="keyword">caddr_t</span> _addr, <span class="keyword">int</span> _data)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !defined(PT_DENY_ATTACH)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PT_DENY_ATTACH 31</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">disable_gdb</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span>* handle = dlopen(<span class="number">0</span>, RTLD_GLOBAL | RTLD_NOW);</span><br><span class="line">    <span class="keyword">ptrace_ptr_t</span> ptrace_ptr = dlsym(handle, <span class="string">"ptrace"</span>);</span><br><span class="line">    ptrace_ptr(PT_DENY_ATTACH, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    dlclose(handle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在swift连接桥文件中加入方法声明<code>void disable_gdb();</code></li>
<li>在<code>UIApplicationMain</code>函数中调用该C方法<code>disable_gdb()</code></li>
<li>为了不妨碍正常开发调试，我们只需要在生产环境中调用该方法，在开发环境中通过宏定义屏蔽掉这个方法的执行，所以最终将<code>main.swift</code>修改如下</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">autoreleasepool(invoking: &#123; () -&gt; () <span class="keyword">in</span></span><br><span class="line">    #<span class="keyword">if</span> !<span class="type">DEBUG</span></span><br><span class="line">            disable_gdb()</span><br><span class="line">    #endif</span><br><span class="line">    <span class="type">UIApplicationMain</span>(</span><br><span class="line">        <span class="type">CommandLine</span>.argc,</span><br><span class="line">        <span class="type">UnsafeMutableRawPointer</span>(<span class="type">CommandLine</span>.unsafeArgv)</span><br><span class="line">            .bindMemory(</span><br><span class="line">                to: <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">Int8</span>&gt;.<span class="keyword">self</span>,</span><br><span class="line">                capacity: <span class="type">Int</span>(<span class="type">CommandLine</span>.argc)),</span><br><span class="line">        <span class="literal">nil</span>,</span><br><span class="line">        <span class="type">NSStringFromClass</span>(<span class="type">AppDelegate</span>.<span class="keyword">self</span>)</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/d5d5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/d5d5.html" itemprop="url">打开Xcode无限崩溃</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-28T20:37:06+08:00">
                2016-11-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>刚刚在用pods安装第三方库的时候Xcode突然Crash，而且无法打开，每次刚加载完界面就Crash。看了下Xcode显示的崩溃信息貌似是数组越界，可惜忘了截图（<del>吓蒙了</del>）。</p>
<p>尝试重启电脑，问题依旧。后来尝试右键crash项目的xcworkspace文件-&gt;显示包内容-&gt;删除该目录下的xcuserdata文件。问题解决~</p>
<p>环境：<strong>Xcode 8.1;macOS Sierra</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://coding.sp0cket.top/post/8660.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sp0cket">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sp0cket的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/8660.html" itemprop="url">苹果2017年强制https修改方法（ATS相关问题）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-28T09:24:19+08:00">
                2016-11-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>6月14日在WWDC 2016开发者大会上，苹果宣布了一个最后期限：2017年1月1日起，苹果AppStore中的所有App都必须启用 App Transport Security（ATS）安全功能。</p>
<p>WWDC链接：<a href="https://developer.apple.com/videos/play/wwdc2016/706/" target="_blank" rel="noopener">What’s New in Security</a></p>
<p>根据要求我们需要尽可能使用https来访问网络资源，但是允许我们通过白名单的方式来访问非https链接，这需要我们在info.plist中做如下设置：</p>
<ul>
<li>首先新增<code>App Transport Security Settings</code>字典</li>
<li>在该字典中新增<code>Allow Arbitrary Loads</code>布尔值，并设置为NO(YES为允许通过http访问，但是现在要求是不能将该项设置为YES)</li>
<li>在<code>App Transport Security Settings</code>中新增<code>Exception Domains</code>字典</li>
<li>在<code>Exception Domains</code>中新增需要添加白名单的域名作为名称的字典如<code>www.baidu.com</code></li>
<li>在域名字典中新增一个变量<code>NSExceptionAllowsInsecureHTTPLoads</code>并且设置为YES</li>
</ul>
<p>现在这个域名下所有网址都能通过http访问了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">sp0cket</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sp0cket" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:qzh6662@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sp0cket</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
